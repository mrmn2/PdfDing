{% extends 'layouts/blank.html' %}

{% block content %}
<div x-data="{ show_delete_collection_modal: false }">
  <div class="flex flex-col md:flex-row md:justify-end"
      :class="{ 'opacity-15': show_delete_collection_modal }">
      <div class="w-full! md:w-72! lg:w-72! px-2 md:px-4 pt-2">
        {% include 'includes/workspace_sidebar.html' with page='collection_details' %}
      </div>
      <div class="flex w-full justify-start items-center py-2 px-2 md:px-8">
          <div class="rounded-md w-full min-[1200px]:w-3xl! md:ml-10 min-[1600px]:ml-40! px-4 py-4 md:pb-4 border
                      bg-slate-100 dark:bg-slate-800 creme:bg-creme-dark-light
                      border-slate-300 dark:border-slate-700 creme:border-creme-dark">
            <div>
              <div class="text-2xl font-bold">
                Collection Details
              </div>
              <div class="pt-4">
                  <span class="text-lg font-bold">Name</span>
              </div>
              <div class="flex justify-between text-slate-600 dark:text-slate-400 creme:text-stone-500">
                  <div class="w-[86%] truncate">
                      <span id="name">
                          {{ collection.name }}
                      </span>
                  </div>
                  <div class="pr-0 md:pr-4">
                      <a id="name-edit" class="cursor-pointer text-primary hover:text-secondary"
                          hx-get="{% url 'edit_collection' identifier=collection.id field_name='name' %}"
                          hx-target="#name"
                          hx-swap="innerHTML">
                          Edit
                      </a>
                  </div>
              </div>
              <div class="pt-2">
                  <span class="text-lg font-bold">Default Collection</span>
              </div>
              <div class="flex justify-between text-slate-600 dark:text-slate-400 creme:text-stone-500">
                  <div class="w-[86%]">
                      <span id="default_collection">
                          {% if collection.default_collection %}
                          Yes
                          {% else %}
                          No
                          {% endif%}
                      </span>
                  </div>
              </div>
              <div class="pt-2">
                  <span class="text-lg font-bold">Description</span>
              </div>
              <div class="flex justify-between text-slate-600 dark:text-slate-400 creme:text-stone-500">
                  <div class="w-[86%] text-sm">
                      <span id="description">
                          {% if collection.description %}
                          {{ collection.description }}
                          {% else %}
                          no description available
                          {% endif%}
                      </span>
                  </div>
                  <div class="pr-0 md:pr-4">
                      <a id="description-edit" class="cursor-pointer text-primary hover:text-secondary"
                          hx-get="{% url 'edit_collection' identifier=collection.id field_name='description' %}"
                          hx-target="#description"
                          hx-swap="innerHTML">
                          Edit
                      </a>
                  </div>
              </div>
              <div class="pt-2">
                  <span class="text-lg font-bold">Date added</span>
              </div>
              <div class="flex justify-between text-slate-600 dark:text-slate-400 creme:text-stone-500">
                  <div class="w-[86%] text-sm">
                      <span id="creation_date">{{ collection.creation_date }}</span>
                  </div>
              </div>
              {% if not collection.default_collection %}
              <div class="pt-12 text-xl font-bold text-red-500">Danger Zone</div>
              <div class="pt-3">
                  <span class="text-lg font-bold">Delete Collection</span>
              </div>
              <div class="flex justify-between text-slate-600 dark:text-slate-400 creme:text-stone-500">
                  <div class="w-5/6">
                      <span>Delete the collection and all its PDFs</span>
                  </div>
                  <div class="pr-0 ml-2 md:pl-0 md:pr-4">
                    <a id="delete-collection" class="text-red-500 hover:text-red-600 cursor-pointer"
                      @click="show_delete_collection_modal = true"
                      hx-get="{% url 'delete_collection' collection.id %}"
                      hx-target="#delete_collection_modal"
                      hx-swap="innerHTML">
                        Delete
                    </a>
                  </div>
              </div>
              {% endif %}
            </div>
          </div>
      </div>
  </div>
  <div x-show="show_delete_collection_modal" x-cloak
      @click.away="show_delete_collection_modal = false"
      @keyup.escape.window="show_delete_collection_modal = false"
      class="fixed inset-x-0 top-40 mx-auto my-auto w-80! lg:w-[28rem]! z-20">
      <div id="delete_collection_modal"></div>
  </div>
</div>
{% endblock %}

<div id="collections_open_collapse_toggle"
      x-data="{ show_collections: false }"
      class="w-5/10 md:w-full cursor-pointer">
  <div @click="show_collections = !show_collections"
        class="flex flex-row justify-between w-full items-center px-2 py-1 relative
              border border-slate-400 dark:border-slate-600 creme:border-stone-400 rounded-sm font-semibold
              bg-slate-100 dark:bg-slate-800 creme:bg-creme-dark-light
              hover:bg-slate-200 dark:hover:bg-slate-700 creme:hover:bg-creme-dark">
    <div class="flex flex-row items-center gap-x-2 w-[85%]">
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
        <!-- source: https://www.svgrepo.com/svg/502680/folder-->
        <!-- license: PD -->
        <path d="M3 17V7C3 5.89543 3.89543 5 5 5H9.58579C9.851 5 10.1054 5.10536 10.2929 5.29289L12 7H19C20.1046 7 21 7.89543 21 9V17C21 18.1046 20.1046 19 19 19H5C3.89543 19 3 18.1046 3 17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <div class="truncate w-[85%]">
        <span>{{ request.user.profile.current_collection.name }}</span>
      </div>
    </div>
    <svg
          xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="w-6! h-6! cursor-pointer text-slate-500! dark:text-slate-300  creme:text-stone-400! rotate-90">
        <path d="m9 18 6-6-6-6"></path>
    </svg>
  </div>
  <div id="collection_modal" x-show="show_collections" x-cloak
        @click.away="show_collections = false"
        @keyup.escape.window="show_collections = false"
        {# leave background as otherwise popup will be transparent #}
        class="absolute z-20 mt-2 left-0 w-[96%] md:w-full mx-2 md:mx-0 rounded-sm p-1 border
              bg-slate-50 dark:bg-slate-900 creme:bg-creme-dark-light
              border-slate-400 dark:border-slate-600 creme:border-stone-400">
    <div class="flex flex-col gap-y-1 p-1 [&>.ws-modal-child]:py-1 [&>.ws-modal-child]:px-2
                [&>.ws-modal-child]:rounded-sm [&>.ws-modal-child]:flex [&>.ws-modal-child]:flex-row
                [&>.ws-modal-child]:hover:bg-slate-200 [&>.ws-modal-child]:dark:hover:bg-slate-700 [&>.ws-modal-child]:creme:hover:bg-creme-dark">
      {% for collection in request.user.profile.collections %}
      <div hx-post="{% url 'change_workspace' collection.id %}"
          hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
          class="ws-modal-child justify-between items-center rounded-sm
                  {% if collection.id == request.user.profile.current_collection_id %}
                  bg-slate-100 dark:bg-slate-800 creme:bg-creme-dark
                  {% endif %}">
        <div class="truncate w-9/10">{{ collection.name }}</div>
        {% if collection.id == request.user.profile.current_collection_id %}
        <div>âœ“</div>
        {% endif %}
      </div>
      {% endfor %}
      <span class="my-1 border-t border-slate-400 dark:border-slate-600 creme:border-stone-400"></span>
      <a href="{% url 'create_workspace' %}" class="ws-modal-child items-center gap-x-2">
        <svg class="-ml-1! h-4 w-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <!-- source: https://www.svgrepo.com/svg/471793/plus -->
          <!-- license: CC0 License-->
          <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="">Create Collection</span>
      </a>
    </div>
  </div>
</div>
